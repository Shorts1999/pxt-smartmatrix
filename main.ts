/**
 * Micro:Bit makeCode extension for neopixel.was2812b matrices
 * 
 * 
 */

//**********************************************//
// library for NeoPixel Displays/Matrices       //
//                                              //
//Written by Sjors Smit                         //
//December 2019/January 2020                    //
//                                              //
//**********************************************//

//% weight=6 color=#00CC60 icon="\uf110"
//% groups=["Setup", "Tools", "PixelControl"]
namespace SmartMatrix {
    /**
     * A Matrix made of ws2812b LEDs
     */
    export class Matrix {
        strip: neopixel.Strip
        Width: number
        Heigth: number

        //%blockId="Matrix_show" block="%matrix| show"
        //%weight=90 group="Tools"
        show(): void {
            this.strip.show();
        }
        //%blockId="Matrix_Brighness" block="%matrix set brightness to %setpoint"
        //%weight=80 group="Setup"
        //%setpoint.defl=32
        Brightness(setpoint: number): void {
            this.strip.setBrightness(setpoint);
        }
        //%blockId="Matrix_clear" block="clear %matrix"
        //%weight=80 group="Tools"
        clear(): void {
            this.strip.clear();
        }

        //%blockId="Matrix_setPixel" block="%matrix| set pixel at x %x| y %y| to colour %colour"
        //%weight=80 group="PixelControl"
        //%colour.shadow=neopixel_colors
        setPixel(x: number, y: number, colour: number): void {
            if (x < 0 || x > this.Width || y < 0 || y > this.Heigth) { return } //If the pixel does not fit on screen, do not draw it (to avoid aliasing)
            if (!(x % 2)) { this.strip.setPixelColor(y + x * this.Heigth, colour); } //Because of the zig-zag formation of the panel all even rows (including 0) are drawn top to bottom
            else { this.strip.setPixelColor(this.Heigth - y + x * this.Heigth, colour); } //While all odd rows are drawn bottom to top
        }
        /**
         * scroll text on the matrix
         */
        //%blockId="Matrix_scrollText" block="%matrix scroll text %text| with speed %speed| and colour %colour"
        //%weight=75 group="PixelControl"
        //%colour.shadow=neopixel_colors
        //%speed.min=1 speed.max=1024 speed.defl=512
        scrollText(text: string, speed: number, colour: number): void {
            this.strip.clear();
            for (let Xpos = this.Width; Xpos > -6 * text.length; Xpos--) {//for loop to scroll across the entire matrix
                for (let letter = 0; letter < text.length; letter++) {//for loop to retrieve all the letters from te text
                    let bitmap = getLettermap(text.charAt(letter));
                    for (let bitmask = 0; bitmask < 6; bitmask++) { //for loop to bitmask the 6 "pixels" in every letter of the 8x6 font.
                        if (!((Xpos + bitmask) % 2)) {//Zigzag pixel string: if the row that's being drawn to (Xpos+bitmask) is odd, then draw from bottom to top
                            for (let Ypos = this.Heigth - 1; Ypos >= 0; Ypos--) {
                                if (bitmap[Ypos] & (0x80 >> bitmask)) { //draw the pixel when there is a "1" in the bitmap
                                    this.strip.setPixelColor(((Xpos + bitmask) * this.Heigth) + Ypos + ((this.Heigth - 8) / 2), colour)
                                }
                            }
                        }
                        else {//else draw from top to bottom
                            for (let Ypos = 0; Ypos < this.Heigth; Ypos++) {
                                if (bitmap[7 - Ypos] & (0x80 >> bitmask)) {
                                    this.strip.setPixelColor(((Xpos + bitmask) * this.Heigth + Ypos + ((this.Heigth - 8) / 2)), colour)
                                }
                            }
                        }
                    }
                }
                this.strip.show();
                basic.pause(2000 / speed);
                this.strip.clear();
            }

        }
        //%blockId="Matrix_drawBitmap" block="%matrix draw bitmap %bitmap at x %x y %y| with width %width heigth %heigth in colour %colour"
        //%weigth=70 group="PixelControl"
        //% colour.shadow=neopixel.colors
        drawBitmap(bitmap: number[], x: number, y: number, width: number, heigth: number, colour: number): void {

        }
    }

    /**
     * Create a new matrix object
     * @param pin the pin to which the matrix is connected
     * @param matrixWidth the amount of leds horizontally
     * @param matrixHeigth the amount of leds vertically
     */
    //%blockId="Matrix_Create" block="Matrix at pin %pin|with a width of %matrixWidth|heigth of %matrixHeigth| and with %mode pixeltype"
    //%weight=100 blockGap=8 group="Setup"
    //%parts="SmartMatrix"
    //%matrixWidth.defl=32 matrixHeigth.defl=8
    //%blockSetVariable=matrix
    export function create(pin: DigitalPin, matrixWidth: number, matrixHeigth: number, mode: NeoPixelMode): Matrix {
        let matrix = new Matrix;
        matrix.strip = neopixel.create(pin, matrixHeigth * matrixWidth, mode);
        matrix.Width = matrixWidth;
        matrix.Heigth = matrixHeigth;

        return matrix;
    }


    let Font8x6: number[] = [
        /**
         * code=0, hex=0x00, ascii="^@"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=1, hex=0x01, ascii="^A"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x6C,  /* 011011 */
        0x44,  /* 010001 */
        0x54,  /* 010101 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=2, hex=0x02, ascii="^B"
         */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x54,  /* 010101 */
        0x7C,  /* 011111 */
        0x44,  /* 010001 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=3, hex=0x03, ascii="^C"
         */
        0x00,  /* 000000 */
        0x28,  /* 001010 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=4, hex=0x04, ascii="^D"
         */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=5, hex=0x05, ascii="^E"
         */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=6, hex=0x06, ascii="^F"
         */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=7, hex=0x07, ascii="^G"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=8, hex=0x08, ascii="^H"
         */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */
        0xCC,  /* 110011 */
        0xCC,  /* 110011 */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */

        /*
         * code=9, hex=0x09, ascii="^I"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x78,  /* 011110 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=10, hex=0x0A, ascii="^J"
         */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */
        0x84,  /* 100001 */
        0xB4,  /* 101101 */
        0xB4,  /* 101101 */
        0x84,  /* 100001 */
        0xFC,  /* 111111 */
        0xFC,  /* 111111 */

        /*
         * code=11, hex=0x0B, ascii="^K"
         */
        0x00,  /* 000000 */
        0x1C,  /* 000111 */
        0x0C,  /* 000011 */
        0x34,  /* 001101 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */

        /*
         * code=12, hex=0x0C, ascii="^L"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=13, hex=0x0D, ascii="^M"
         */
        0x10,  /* 000100 */
        0x18,  /* 000110 */
        0x14,  /* 000101 */
        0x10,  /* 000100 */
        0x30,  /* 001100 */
        0x70,  /* 011100 */
        0x60,  /* 011000 */
        0x00,  /* 000000 */

        /*
         * code=14, hex=0x0E, ascii="^N"
         */
        0x0C,  /* 000011 */
        0x34,  /* 001101 */
        0x2C,  /* 001011 */
        0x34,  /* 001101 */
        0x2C,  /* 001011 */
        0x6C,  /* 011011 */
        0x60,  /* 011000 */
        0x00,  /* 000000 */

        /*
         * code=15, hex=0x0F, ascii="^O"
         */
        0x00,  /* 000000 */
        0x54,  /* 010101 */
        0x38,  /* 001110 */
        0x6C,  /* 011011 */
        0x38,  /* 001110 */
        0x54,  /* 010101 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=16, hex=0x10, ascii="^P"
         */
        0x20,  /* 001000 */
        0x30,  /* 001100 */
        0x38,  /* 001110 */
        0x3C,  /* 001111 */
        0x38,  /* 001110 */
        0x30,  /* 001100 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */

        /*
         * code=17, hex=0x11, ascii="^Q"
         */
        0x08,  /* 000010 */
        0x18,  /* 000110 */
        0x38,  /* 001110 */
        0x78,  /* 011110 */
        0x38,  /* 001110 */
        0x18,  /* 000110 */
        0x08,  /* 000010 */
        0x00,  /* 000000 */

        /*
         * code=18, hex=0x12, ascii="^R"
         */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=19, hex=0x13, ascii="^S"
         */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */

        /*
         * code=20, hex=0x14, ascii="^T"
         */
        0x3C,  /* 001111 */
        0x54,  /* 010101 */
        0x54,  /* 010101 */
        0x34,  /* 001101 */
        0x14,  /* 000101 */
        0x14,  /* 000101 */
        0x14,  /* 000101 */
        0x00,  /* 000000 */

        /*
         * code=21, hex=0x15, ascii="^U"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x30,  /* 001100 */
        0x28,  /* 001010 */
        0x18,  /* 000110 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=22, hex=0x16, ascii="^V"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x78,  /* 011110 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=23, hex=0x17, ascii="^W"
         */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */

        /*
         * code=24, hex=0x18, ascii="^X"
         */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=25, hex=0x19, ascii="^Y"
         */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=26, hex=0x1A, ascii="^Z"
         */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x18,  /* 000110 */
        0x7C,  /* 011111 */
        0x18,  /* 000110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=27, hex=0x1B, ascii="^["
         */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x30,  /* 001100 */
        0x7C,  /* 011111 */
        0x30,  /* 001100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=28, hex=0x1C, ascii="^\"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */

        /*
         * code=29, hex=0x1D, ascii="^]"
         */
        0x00,  /* 000000 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x7C,  /* 011111 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=30, hex=0x1E, ascii="^^"
         */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=31, hex=0x1F, ascii="^_"
         */
        0x7C,  /* 011111 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=32, hex=0x20, ascii=" "
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=33, hex=0x21, ascii="!"
         */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=34, hex=0x22, ascii="""
         */
        0x6C,  /* 011011 */
        0x6C,  /* 011011 */
        0x48,  /* 010010 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=35, hex=0x23, ascii="#"
         */
        0x00,  /* 000000 */
        0x28,  /* 001010 */
        0x7C,  /* 011111 */
        0x28,  /* 001010 */
        0x28,  /* 001010 */
        0x7C,  /* 011111 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */

        /*
         * code=36, hex=0x24, ascii="$"
         */
        0x20,  /* 001000 */
        0x38,  /* 001110 */
        0x40,  /* 010000 */
        0x30,  /* 001100 */
        0x08,  /* 000010 */
        0x70,  /* 011100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=37, hex=0x25, ascii="%"
         */
        0x64,  /* 011001 */
        0x64,  /* 011001 */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x4C,  /* 010011 */
        0x4C,  /* 010011 */
        0x00,  /* 000000 */

        /*
         * code=38, hex=0x26, ascii="&"
         */
        0x20,  /* 001000 */
        0x50,  /* 010100 */
        0x50,  /* 010100 */
        0x20,  /* 001000 */
        0x54,  /* 010101 */
        0x48,  /* 010010 */
        0x34,  /* 001101 */
        0x00,  /* 000000 */

        /*
         * code=39, hex=0x27, ascii="'"
         */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=40, hex=0x28, ascii="("
         */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=41, hex=0x29, ascii=")"
         */
        0x20,  /* 001000 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */

        /*
         * code=42, hex=0x2A, ascii="*"
         */
        0x00,  /* 000000 */
        0x28,  /* 001010 */
        0x38,  /* 001110 */
        0x7C,  /* 011111 */
        0x38,  /* 001110 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=43, hex=0x2B, ascii="+"
         */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=44, hex=0x2C, ascii=","
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x20,  /* 001000 */

        /*
         * code=45, hex=0x2D, ascii="-"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=46, hex=0x2E, ascii="."
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */

        /*
         * code=47, hex=0x2F, ascii="/"
         */
        0x00,  /* 000000 */
        0x04,  /* 000001 */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x40,  /* 010000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=48, hex=0x30, ascii="0"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x4C,  /* 010011 */
        0x54,  /* 010101 */
        0x64,  /* 011001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=49, hex=0x31, ascii="1"
         */
        0x10,  /* 000100 */
        0x30,  /* 001100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=50, hex=0x32, ascii="2"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x04,  /* 000001 */
        0x18,  /* 000110 */
        0x20,  /* 001000 */
        0x40,  /* 010000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */

        /*
         * code=51, hex=0x33, ascii="3"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x04,  /* 000001 */
        0x38,  /* 001110 */
        0x04,  /* 000001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=52, hex=0x34, ascii="4"
         */
        0x08,  /* 000010 */
        0x18,  /* 000110 */
        0x28,  /* 001010 */
        0x48,  /* 010010 */
        0x7C,  /* 011111 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x00,  /* 000000 */

        /*
         * code=53, hex=0x35, ascii="5"
         */
        0x7C,  /* 011111 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x04,  /* 000001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=54, hex=0x36, ascii="6"
         */
        0x18,  /* 000110 */
        0x20,  /* 001000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=55, hex=0x37, ascii="7"
         */
        0x7C,  /* 011111 */
        0x04,  /* 000001 */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */

        /*
         * code=56, hex=0x38, ascii="8"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=57, hex=0x39, ascii="9"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x04,  /* 000001 */
        0x08,  /* 000010 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */

        /*
         * code=58, hex=0x3A, ascii=":"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */

        /*
         * code=59, hex=0x3B, ascii=";"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x20,  /* 001000 */

        /*
         * code=60, hex=0x3C, ascii="<"
         */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x40,  /* 010000 */
        0x20,  /* 001000 */
        0x10,  /* 000100 */
        0x08,  /* 000010 */
        0x00,  /* 000000 */

        /*
         * code=61, hex=0x3D, ascii="="
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=62, hex=0x3E, ascii=">"
         */
        0x20,  /* 001000 */
        0x10,  /* 000100 */
        0x08,  /* 000010 */
        0x04,  /* 000001 */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */

        /*
         * code=63, hex=0x3F, ascii="?"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x04,  /* 000001 */
        0x18,  /* 000110 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=64, hex=0x40, ascii="@"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x5C,  /* 010111 */
        0x54,  /* 010101 */
        0x5C,  /* 010111 */
        0x40,  /* 010000 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=65, hex=0x41, ascii="A"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x7C,  /* 011111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=66, hex=0x42, ascii="B"
         */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=67, hex=0x43, ascii="C"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=68, hex=0x44, ascii="D"
         */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=69, hex=0x45, ascii="E"
         */
        0x7C,  /* 011111 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */

        /*
         * code=70, hex=0x46, ascii="F"
         */
        0x7C,  /* 011111 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x00,  /* 000000 */

        /*
         * code=71, hex=0x47, ascii="G"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x40,  /* 010000 */
        0x5C,  /* 010111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x00,  /* 000000 */

        /*
         * code=72, hex=0x48, ascii="H"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x7C,  /* 011111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=73, hex=0x49, ascii="I"
         */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=74, hex=0x4A, ascii="J"
         */
        0x04,  /* 000001 */
        0x04,  /* 000001 */
        0x04,  /* 000001 */
        0x04,  /* 000001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=75, hex=0x4B, ascii="K"
         */
        0x44,  /* 010001 */
        0x48,  /* 010010 */
        0x50,  /* 010100 */
        0x60,  /* 011000 */
        0x50,  /* 010100 */
        0x48,  /* 010010 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=76, hex=0x4C, ascii="L"
         */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x7C,  /* 011111 */
        0x00,  /* 000000 */

        /*
         * code=77, hex=0x4D, ascii="M"
         */
        0x44,  /* 010001 */
        0x6C,  /* 011011 */
        0x54,  /* 010101 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=78, hex=0x4E, ascii="N"
         */
        0x44,  /* 010001 */
        0x64,  /* 011001 */
        0x54,  /* 010101 */
        0x4C,  /* 010011 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=79, hex=0x4F, ascii="O"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=80, hex=0x50, ascii="P"
         */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x00,  /* 000000 */

        /*
         * code=81, hex=0x51, ascii="Q"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x54,  /* 010101 */
        0x48,  /* 010010 */
        0x34,  /* 001101 */
        0x00,  /* 000000 */

        /*
         * code=82, hex=0x52, ascii="R"
         */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x48,  /* 010010 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=83, hex=0x53, ascii="S"
         */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x40,  /* 010000 */
        0x38,  /* 001110 */
        0x04,  /* 000001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=84, hex=0x54, ascii="T"
         */
        0x7C,  /* 011111 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=85, hex=0x55, ascii="U"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=86, hex=0x56, ascii="V"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x28,  /* 001010 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=87, hex=0x57, ascii="W"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x54,  /* 010101 */
        0x54,  /* 010101 */
        0x54,  /* 010101 */
        0x54,  /* 010101 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */

        /*
         * code=88, hex=0x58, ascii="X"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x28,  /* 001010 */
        0x10,  /* 000100 */
        0x28,  /* 001010 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=89, hex=0x59, ascii="Y"
         */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x28,  /* 001010 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=90, hex=0x5A, ascii="Z"
         */
        0x78,  /* 011110 */
        0x08,  /* 000010 */
        0x10,  /* 000100 */
        0x20,  /* 001000 */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=91, hex=0x5B, ascii="["
         */
        0x38,  /* 001110 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=92, hex=0x5C, ascii="\"
         */
        0x00,  /* 000000 */
        0x40,  /* 010000 */
        0x20,  /* 001000 */
        0x10,  /* 000100 */
        0x08,  /* 000010 */
        0x04,  /* 000001 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=93, hex=0x5D, ascii="]"
         */
        0x38,  /* 001110 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=94, hex=0x5E, ascii="^"
         */
        0x10,  /* 000100 */
        0x28,  /* 001010 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=95, hex=0x5F, ascii="_"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0xFC,  /* 111111 */

        /*
         * code=96, hex=0x60, ascii="`"
         */
        0x30,  /* 001100 */
        0x30,  /* 001100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

        /*
         * code=97, hex=0x61, ascii="a"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x38,  /* 001110 */
        0x04,  /* 000001 */
        0x3C,  /* 001111 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x00,  /* 000000 */

        /*
         * code=98, hex=0x62, ascii="b"
         */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=99, hex=0x63, ascii="c"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x40,  /* 010000 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=100, hex=0x64, ascii="d"
         */
        0x04,  /* 000001 */
        0x04,  /* 000001 */
        0x3C,  /* 001111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x00,  /* 000000 */

        /*
         * code=101, hex=0x65, ascii="e"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x40,  /* 010000 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=102, hex=0x66, ascii="f"
         */
        0x18,  /* 000110 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x78,  /* 011110 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x00,  /* 000000 */

        /*
         * code=103, hex=0x67, ascii="g"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x3C,  /* 001111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x04,  /* 000001 */
        0x38,  /* 001110 */

        /*
         * code=104, hex=0x68, ascii="h"
         */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x70,  /* 011100 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x00,  /* 000000 */

        /*
         * code=105, hex=0x69, ascii="i"
         */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x18,  /* 000110 */
        0x00,  /* 000000 */

        /*
         * code=106, hex=0x6A, ascii="j"
         */
        0x08,  /* 000010 */
        0x00,  /* 000000 */
        0x18,  /* 000110 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x48,  /* 010010 */
        0x30,  /* 001100 */

        /*
         * code=107, hex=0x6B, ascii="k"
         */
        0x40,  /* 010000 */
        0x40,  /* 010000 */
        0x48,  /* 010010 */
        0x50,  /* 010100 */
        0x60,  /* 011000 */
        0x50,  /* 010100 */
        0x48,  /* 010010 */
        0x00,  /* 000000 */

        /*
         * code=108, hex=0x6C, ascii="l"
         */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x18,  /* 000110 */
        0x00,  /* 000000 */

        /*
         * code=109, hex=0x6D, ascii="m"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x68,  /* 011010 */
        0x54,  /* 010101 */
        0x54,  /* 010101 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x00,  /* 000000 */

        /*
         * code=110, hex=0x6E, ascii="n"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x70,  /* 011100 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x00,  /* 000000 */

        /*
         * code=111, hex=0x6F, ascii="o"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=112, hex=0x70, ascii="p"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x78,  /* 011110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x78,  /* 011110 */
        0x40,  /* 010000 */

        /*
         * code=113, hex=0x71, ascii="q"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x3C,  /* 001111 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x3C,  /* 001111 */
        0x04,  /* 000001 */

        /*
         * code=114, hex=0x72, ascii="r"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x58,  /* 010110 */
        0x24,  /* 001001 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x70,  /* 011100 */
        0x00,  /* 000000 */

        /*
         * code=115, hex=0x73, ascii="s"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x38,  /* 001110 */
        0x40,  /* 010000 */
        0x38,  /* 001110 */
        0x04,  /* 000001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */

        /*
         * code=116, hex=0x74, ascii="t"
         */
        0x00,  /* 000000 */
        0x20,  /* 001000 */
        0x78,  /* 011110 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x28,  /* 001010 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=117, hex=0x75, ascii="u"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x58,  /* 010110 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */

        /*
         * code=118, hex=0x76, ascii="v"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x28,  /* 001010 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=119, hex=0x77, ascii="w"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x54,  /* 010101 */
        0x7C,  /* 011111 */
        0x28,  /* 001010 */
        0x00,  /* 000000 */

        /*
         * code=120, hex=0x78, ascii="x"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x30,  /* 001100 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x00,  /* 000000 */

        /*
         * code=121, hex=0x79, ascii="y"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x48,  /* 010010 */
        0x38,  /* 001110 */
        0x10,  /* 000100 */
        0x60,  /* 011000 */

        /*
         * code=122, hex=0x7A, ascii="z"
         */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x78,  /* 011110 */
        0x08,  /* 000010 */
        0x30,  /* 001100 */
        0x40,  /* 010000 */
        0x78,  /* 011110 */
        0x00,  /* 000000 */

        /*
         * code=123, hex=0x7B, ascii="{"
         */
        0x18,  /* 000110 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x60,  /* 011000 */
        0x20,  /* 001000 */
        0x20,  /* 001000 */
        0x18,  /* 000110 */
        0x00,  /* 000000 */

        /*
         * code=124, hex=0x7C, ascii="|"
         */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x10,  /* 000100 */
        0x00,  /* 000000 */

        /*
         * code=125, hex=0x7D, ascii="}"
         */
        0x30,  /* 001100 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x0C,  /* 000011 */
        0x08,  /* 000010 */
        0x08,  /* 000010 */
        0x30,  /* 001100 */
        0x00,  /* 000000 */

        /*
         * code=126, hex=0x7E, ascii="~"
         */
        0x28,  /* 001010 */
        0x50,  /* 010100 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */
        0x00,  /* 000000 */

    ]
    let Test = [0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x44,  /* 010001 */
        0x44,  /* 010001 */
        0x38,  /* 001110 */
        0x00,  /* 000000 */]
    //Take in a string-character and return a bitmap to draw on the display
    export function getLettermap(char: string): number[] {
        let bitmap: number[] = [255, 255, 255, 255, 255, 255, 255, 255];
        let offset = 65;//char.charCodeAt(0); //Convert the ASCII-Character to it's code to generate the offset in the font-array

        for (let i = 0; i < 8; i++) {
            bitmap[i] = 0xff && Font8x6[i]; //Every character has 8 arguments in the array, so multiply the offset by 8, and then take ne next 8 arguments as the value for the correct bitmap.
        }
        return bitmap;
    }
}
